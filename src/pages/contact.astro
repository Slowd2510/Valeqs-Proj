---
import Layout from '../layouts/Layout.astro';
import { getLanguage, loadTranslations } from '../utils/language.js';

// Get language and translations
const userLang = await getLanguage(Astro.request);
const t = await loadTranslations(userLang);

const discordServerId = "1300250135892197426"; 
const discordInviteLink = "https://discord.gg/mArhZj3gr2"; 
---

<Layout title={userLang === 'de' ? "Kontakt | VALEQS" : "Contact | VALEQS"} activePage="contact">
  <div class="contact-container">
    <header class="page-header">
      <h1 class="page-title">{userLang === 'de' ? "Kontakt & Support" : "Contact & Support"}</h1>
      <div class="title-underline"></div>
      <p class="subtitle">
        {userLang === 'de' 
          ? "Unser Team steht dir für alle Fragen zur Verfügung" 
          : "Our team is available to assist you with any questions"}
      </p>
    </header>

    <div class="contact-grid">
      <!-- Left Column: Team & Support Info -->
      <section class="support-section">
        <div class="content">
          <h2 class="section-title">
            {userLang === 'de' ? "Wie können wir helfen?" : "How can we help?"}
          </h2>
          
          <p class="intro-text">
            {userLang === 'de' 
              ? "Unser Team steht dir zur Verfügung, wenn du Fragen hast oder Unterstützung benötigst. Ob du Bugs melden möchtest, Informationen zu Rängen brauchst oder andere Anliegen hast, wir helfen dir gerne weiter." 
              : "Our team is available to assist you with any questions or support needs. Whether you want to report bugs, need information about ranks, or have other concerns, we're here to help."}
          </p>
          
          <div class="contact-methods">
            <div class="contact-method">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
              </div>
              <div class="method-details">
                <h3>Email</h3>
                <a href="mailto:kontakt@valeqs.de">kontakt@valeqs.de</a>
              </div>
            </div>
            
            <div class="contact-method">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
              </div>
              <div class="method-details">
                <h3>Discord</h3>
                <a href={discordInviteLink} target="_blank" rel="noopener noreferrer">
                  {userLang === 'de' ? "Direkt zum Discord Server" : "Join our Discord Server"}
                </a>
              </div>
            </div>
          </div>

          <!-- Bereich für Kontaktgründe - alles in einem Kasten -->
          <div class="contact-reasons-container">
            <h3 class="subheading">{userLang === 'de' ? "Wann solltest du uns kontaktieren?" : "When should you contact us?"}</h3>
            
            <div class="contact-reasons-box">
              <div class="reason-item">
                <div class="reason-header">
                  <h4>{userLang === 'de' ? "Bugreports" : "Bug Reports"}</h4>
                </div>
                <p>{userLang === 'de' 
                  ? "Falls du Fehler im Spiel entdeckst, beschreibe bitte genau, was passiert ist, welche Schritte dazu geführt haben und ob du Screenshots oder Videos davon hast." 
                  : "If you discover errors in the game, please describe exactly what happened, what steps led to it, and if you have screenshots or videos of it."}
                </p>
              </div>
              
              <div class="reason-divider"></div>
              
              <div class="reason-item">
                <div class="reason-header">
                  <h4>{userLang === 'de' ? "Fragen zu Rängen" : "Rank Questions"}</h4>
                </div>
                <p>{userLang === 'de' 
                  ? "Wenn du mehr über Premium oder King erfahren möchtest, kontaktiere uns." 
                  : "If you would like to learn more about Premium or King ranks, please contact us."}
                </p>
              </div>
              
              <div class="reason-divider"></div>
              
              <div class="reason-item">
                <div class="reason-header">
                  <h4>{userLang === 'de' ? "Sonstige Anliegen" : "Other Inquiries"}</h4>
                </div>
                <p>{userLang === 'de' 
                  ? "Bei jeglichen Fragen oder Vorschlägen stehen wir dir ebenfalls gerne zur Verfügung." 
                  : "For any questions or suggestions, we are also at your disposal."}
                </p>
              </div>
            </div>
          </div>
          
          <p class="note">
            {userLang === 'de' 
              ? "Wir bemühen uns, alle Anfragen innerhalb von 24 Stunden zu beantworten." 
              : "We strive to respond to all inquiries within 24 hours."}
          </p>
        </div>
      </section>
      
      <!-- Right Column: Discord Widget -->
      <section class="discord-section">
        <h2 class="section-title">{userLang === 'de' ? "Unser Community Server" : "Our Community Server"}</h2>
        
        <div class="discord-widget-container">
          <iframe 
            src={`https://discord.com/widget?id=${discordServerId}&theme=dark`}
            width="100%" 
            height="500" 
            allowtransparency="true" 
            frameborder="0" 
            sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
            title="Discord Server Widget"
          ></iframe>
        </div>
        
        <a href={discordInviteLink} class="discord-button" target="_blank" rel="noopener noreferrer">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
          </svg>
          {userLang === 'de' ? "Server beitreten" : "Join Server"}
        </a>
      </section>
    </div>
  </div>
</Layout>

<style>
  :root {
    --accent-subtle: #445166;
    --accent-medium: #586690;
    --accent-strong: #5865b5;
    --card-bg: rgba(30, 33, 42, 0.7);
    --card-border: rgba(60, 73, 94, 0.4);
    --text-primary: #e3e5e8;
    --text-secondary: #b9bbbe;
    --text-muted: #8b919a;
    --bg-overlay: rgba(20, 22, 30, 0.6);
    --transition-standard: all 0.25s cubic-bezier(0.25, 1, 0.5, 1);
    --shadow-subtle: 0 2px 10px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 5px 20px rgba(0, 0, 0, 0.15);
    --shadow-strong: 0 8px 30px rgba(0, 0, 0, 0.2);
  }

  /* Page Layout */
  .contact-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 3rem 1.5rem 5rem;
  }
  
  .page-header {
    text-align: center;
    margin-bottom: 4rem;
  }
  
  .page-title {
    font-size: 2.75rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
  }
  
  .title-underline {
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--accent-medium), var(--accent-strong));
    margin: 0 auto 1.5rem;
    border-radius: 3px;
  }
  
  .subtitle {
    font-size: 1.25rem;
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.5;
  }

  /* Grid Layout for the main contact content */
  .contact-grid {
    display: grid;
    grid-template-columns: 5fr 4fr;
    gap: 3rem;
    align-items: start;
  }

  /* Support Section Styles */
  .section-title {
    font-size: 1.75rem;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    font-weight: 600;
    position: relative;
    padding-bottom: 0.5rem;
  }
  
  .section-title:after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 2px;
    background-color: var(--accent-medium);
  }

  .support-section {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 2.5rem;
    box-shadow: var(--shadow-medium);
    border: 1px solid var(--card-border);
  }
  
  .intro-text {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: 2.5rem;
    line-height: 1.7;
  }

  /* Contact Methods Section */
  .contact-methods {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-bottom: 2.5rem;
    padding: 1.5rem;
    background-color: var(--bg-overlay);
    border-radius: 8px;
  }
  
  .contact-method {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: var(--accent-subtle);
    color: var(--text-primary);
  }
  
  .icon svg {
    width: 24px;
    height: 24px;
  }
  
  .method-details h3 {
    font-size: 1.1rem;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
  }
  
  .method-details a {
    color: var(--accent-medium);
    text-decoration: none;
    font-size: 1rem;
    transition: var(--transition-standard);
    border-bottom: 1px solid transparent;
  }
  
  .method-details a:hover {
    color: var(--accent-strong);
    border-bottom-color: var(--accent-strong);
  }

  /* Subheading */
  .subheading {
    font-size: 1.4rem;
    color: var(--text-primary);
    margin: 0.5rem 0 1.5rem;
    font-weight: 600;
  }

  /* Contact Reasons Section - Gemeinsamer Kasten */
  .contact-reasons-container {
    margin-bottom: 2.5rem;
  }

  .contact-reasons-box {
    background-color: var(--bg-overlay);
    padding: 2rem;
    border-radius: 12px;
    border: 1px solid var(--card-border);
    box-shadow: var(--shadow-subtle);
    transition: var(--transition-standard);
  }

  .contact-reasons-box:hover {
    border-color: var(--accent-subtle);
    box-shadow: var(--shadow-medium);
  }

  .reason-item {
    padding: 1rem 0;
  }

  .reason-divider {
    height: 1px;
    background-color: var(--card-border);
    margin: 1rem 0;
  }

  .reason-header {
    display: flex;
    align-items: center;
    margin-bottom: 0.75rem;
  }

  .reason-header h4 {
    color: var(--text-primary);
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
  }

  .reason-item p {
    color: var(--text-secondary);
    line-height: 1.6;
    font-size: 0.95rem;
    margin: 0;
  }

  /* Responsive Anpassungen */
  @media (max-width: 480px) {
    .reason-item p {
      margin-top: 0.5rem;
    }
  }

  .note {
    font-style: italic;
    color: var(--text-muted);
    text-align: center;
    padding: 1rem;
    background-color: var(--bg-overlay);
    border-radius: 8px;
    font-size: 0.95rem;
  }

  /* Discord Section Styles */
  .discord-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 2.5rem;
    box-shadow: var(--shadow-medium);
    border: 1px solid var(--card-border);
  }
  
  .discord-section .section-title {
    align-self: flex-start;
  }
  
  .discord-widget-container {
    width: 100%;
    margin-bottom: 1.5rem;
    overflow: hidden;
    border-radius: 12px;
    box-shadow: var(--shadow-strong);
    transition: var(--transition-standard);
    border: 1px solid var(--card-border);
  }
  
  .discord-widget-container:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-strong), 0 0 20px rgba(88, 101, 181, 0.15);
  }
  
  .discord-button {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background-color: var(--accent-subtle);
    color: var(--text-primary);
    padding: 0.9rem 1.75rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition-standard);
    border: 1px solid var(--accent-medium);
    margin-top: 1rem;
    font-size: 1rem;
  }
  
  .discord-button:hover {
    background-color: var(--accent-medium);
    transform: translateY(-2px);
    box-shadow: var(--shadow-medium);
  }
  
  .discord-button svg {
    width: 20px;
    height: 20px;
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .contact-grid {
      grid-template-columns: 1fr;
      gap: 2.5rem;
    }
    
    .discord-section {
      order: -1;
    }
  }
  
  @media (max-width: 768px) {
    .contact-container {
      padding: 2rem 1rem 3rem;
    }
    
    .page-title {
      font-size: 2.25rem;
    }
    
    .support-section,
    .discord-section {
      padding: 2rem 1.5rem;
    }
    
    .contact-reasons {
      grid-template-columns: 1fr;
    }
  }
  
  @media (max-width: 480px) {
    .page-title {
      font-size: 1.75rem;
    }
    
    .subtitle {
      font-size: 1rem;
    }
    
    .contact-method {
      flex-direction: column;
      text-align: center;
    }
    
    .icon {
      margin-bottom: 0.5rem;
    }
  }
</style>